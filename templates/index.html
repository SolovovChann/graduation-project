{% extends 'base.html' %}

{% block main %}

    {% if user %}
        <!-- Logout -->
        <p class="text-right">
            –ü—Ä–∏–≤–µ—Ç, {{ user.ALogin }} <a href="/views/logout.php" class="text-danger">–í—ã–π—Ç–∏</a>
        </p>
        <!-- /Logout -->
    {% else %}
        <!-- Authorization -->
        <p class="text-center">–í—ã –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω—ã. <a href="#" data-toggle="modal" data-target="#loginModal" >–í–æ–π—Ç–∏</a></p>

        <!-- Modal login form -->
        <div class="modal fade" id="loginModal" tabindex="-1" role="dialog" aria-labelledby="loginModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="loginModalLabel">–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">

                    <form action="views/login.php" method="post">

                        <div class="form-group">
                            <label for="login">–õ–æ–≥–∏–Ω</label>
                            <input type="text"
                                class="form-control"
                                name="login"
                                id="login"
                                placeholder="–õ–æ–≥–∏–Ω"
                                required
                            >
                        </div>
                        <div class="form-group">
                            <label for="password">–ü–∞—Ä–æ–ª—å</label>
                            <input type="password"
                                class="form-control"
                                name="password"
                                id="password"
                                placeholder="–ü–∞—Ä–æ–ª—å"
                                required
                            >
                        </div>

                        <div class="text-center">
                            <button type="submit" name="signin" class="btn btn-primary px-5">–í–æ–π—Ç–∏</button>
                        </div>

                    </form>

                </div>
                </div>
            </div>
        </div>
        <!-- /Modal login form -->

    {% endif %}

    <!-- Header -->
    <h3 class="text-center">–°—Ç—É–¥–µ–Ω—Ç—ã –ø–æ –∫–ª–∞—Å—Å–∞–º</h3>
    <!-- Row: get students by class -->
    <div class="row justify-content-center mb-3">
        <!-- Column -->
        <div class="col-sm-12 col-lg-8">
        
        <form>
            <div class="form-row justify-content-center">
                <div class="col-sm-12 col-md-8 mb-3 mb-md-0">
                    
                    <select name="classId" class="form-control custom-select">
                        <option selected value="*">–í—Å–µ –∫–ª–∞—Å—Å—ã</option>
                        {% for class in classes %}
                            <option value="{{ class.CId }}">
                                {{ currentYear - class.CLevel }} "{{ class.Cletter }}"
                            </option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col-sm-8 col-md-4">
                    <button type="button" class="btn btn-primary w-100" name="generateReport" id="generateReport">–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å</button>
                </div>
            </div>
        </form>

        </div>
        <!-- /Column -->

    </div>
    <!-- /Row -->

    <!-- Header -->
    <h3 class="text-center">–¢–∞–±–ª–∏—Ü–∞ —Å—Ç—É–¥–µ–Ω—Ç—ã <button role="button" class="btn btn-sm btn-danger" onclick="updateTable()">–û—á–∏—Å—Ç–∏—Ç—å</button></h3>
    <!-- Row: table "students" -->
    <div class="row justify-content-center mb-3">

        <!-- Column -->
        <div class="col-sm-12 col-lg-12">
        
            <table class="table table-striped table-hover table-responsive-md" id="table">
                <caption>–°–ø–∏—Å–æ–∫ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤</caption>
                <tr class="thead-dark">
                    <th scope="col">–ö–æ–¥</th>
                    <th scope="col">–§–∞–º–∏–ª–∏—è</th>
                    <th scope="col">–ò–º—è</th>
                    <th scope="col">–û—Ç—á–µ—Å—Ç–≤–æ</th>
                    <th scope="col">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è</th>
                    <th scope="col">–ö–ª–∞—Å—Å</th>
                </tr>
                {% for student in students %}
                    <tr>
                        <th scope="row">{{ student.SId }}</th>
                        <td>{{ student.SLastName }}</td>
                        <td>{{ student.SFirstName }}</td>
                        <td>{{ student.SMidName }}</td>
                        <td>{{ student.SBirthDate }}</td>
                        <td>{{ currentYear - student.CLevel }} "{{ student.Cletter }}"</td>
                    </tr>
                {% endfor %}
            </table>
        </div>
        <!-- /Column -->
    </div>
    <!-- /Row -->

    <!-- Header -->
    <h3 class="text-center">–î–æ–±–∞–≤–∏—Ç—å —Å—Ç—É–¥–µ–Ω—Ç–∞</h3>
    <!-- Row: add student -->
    <div class="row justify-content-center mb-3">
        
        <div class="col-sm-12 col-lg-8">
        
            <form action="/ajax/addStudent.php" method="post">
                            
                <div class="form-row">
                
                    <div class="form-group col-sm-12 col-md-4">
                        <label for="LastName">–§–∞–º–∏–ª–∏—è</label>
                        <input
                            class="form-control"
                            id="LastName"
                            name="LastName"
                            placeholder="–ò–≤–∞–Ω–æ–≤"
                            required
                            type="text"
                        >
                    </div>

                    <div class="form-group col-sm-12 col-md-4">
                        <label for="FirstName">–ò–º—è</label>
                        <input
                            class="form-control"
                            id="FirstName"
                            name="FirstName"
                            placeholder="–ò–≤–∞–Ω"
                            required
                            type="text"
                        >
                    </div>

                    <div class="form-group col-sm-12 col-md-4">
                        <label for="MidName">–û—Ç—á–µ—Å—Ç–≤–æ</label>
                        <input
                            class="form-control"
                            id="MidName"
                            name="MidName"
                            placeholder="–ò–≤–∞–Ω–æ–≤–∏—á"
                            required
                            type="text"
                        >
                    </div>
                </div>

                <div class="form-group">
                    <label for="BirthDate">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è</label>
                    <input
                        class="form-control"
                        id="BirthDate"
                        max="2014-01-31"
                        min="2001-01-01"
                        name="BirthDate"
                        placeholder=""
                        required
                        type="date"
                    >
                </div>

                <div class="form-group">
                    <label for="classId">–ö–æ–¥ –∫–ª–∞—Å—Å–∞</label>
                    <select name="classId" id="classId" class="form-control custom-select">
                    
                        {% for class in classes %}
                            <option value="{{ class.CId }}">{{ currentYear - class.CLevel }} "{{ class.Cletter }}" (–ö–æ–¥: {{ class.CId }})</option>
                        {% endfor %}

                    </select>
                </div>

            <div class="text-center">
                {% if user %}
                    <span type="button" class="btn btn-success px-3 px-lg-5" id="addStudent">–î–æ–±–∞–≤–∏—Ç—å</span>
                    <span type="button" class="btn btn-warning px-3 px-lg-5" id="generateName">üé≤ –°–ª—É—á–∞–π–Ω–æ</span>
                {% else %}
                    <span data-toggle="modal" data-target="#loginModal" class="btn btn-success px-5">–î–æ–±–∞–≤–∏—Ç—å</span>
                {% endif %}
            </div>

            </form>
        </div>
    </div>
    <!-- /Row -->

    <!-- Header -->
    <h3 class="text-center">–û—Ç—á—ë—Ç—ã</h3>
    <!-- Row: reports -->
    <div class="row justify-content-center">
        
        <div class="col-sm-12 col-lg-8">
        
            <form action="/views/report.php" method="POST">
                <div class="form-group">

                    <div class="form-check custom-control custom-radio">
                        <input type="radio" required name="report" value="the_youngest_first_grader" id="the_youngest_first_grader" class="custom-control-input">
                        <label for="the_youngest_first_grader" class="custom-control-label">–°–∞–º—ã–π –º–ª–∞–¥—à–∏–π –ø–µ—Ä–≤–æ–∫–ª–∞—Å—Å–Ω–∏–∫ (–∏–∑ –≤—Å–µ–π —à–∫–æ–ª—ã)</label>
                    </div>

                    <div class="form-check custom-control custom-radio">
                        <input type="radio" required name="report" value="number_of_second_graders" id="number_of_second_graders" class="custom-control-input">
                        <label for="number_of_second_graders" class="custom-control-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—á–µ–Ω–∏–∫–æ–≤ –≤–æ –≤—Å–µ—Ö –≤—Ç–æ—Ä—ã—Ö –∫–ª–∞—Å—Å–∞—Ö</label>
                    </div>

                    <div class="form-check custom-control custom-radio mb-2">
                        <input type="radio" required name="report" value="birthday_people_in_July" id="birthday_people_in_July" class="custom-control-input">
                        <label for="birthday_people_in_July" class="custom-control-label">C–ø–∏—Å–æ–∫ –∏–º–µ–Ω–∏–Ω–Ω–∏–∫–æ–≤ –≤ –∏—é–ª–µ</label>
                    </div>
                    
                    <div class="text-center">
                        <button type="submit" class="btn btn-success px-5">–û—Ñ–æ—Ä–º–∏—Ç—å –æ—Ç—á—ë—Ç</button>
                    </div>

                </div>
            </form>
        </div>
    </div>
    <!-- /Row -->

{% endblock main %}